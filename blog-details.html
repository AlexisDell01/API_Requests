<!DOCTYPE html>
<html class="no-js" lang="zxx">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>Thesignatures - Restaurant HTML Template</title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />
  <!-- Place favicon.ico in the root Internist, General Practitonery -->

  <!-- CSS here -->
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/animate.min.css" />
  <link rel="stylesheet" href="css/magnific-popup.css" />
  <link rel="stylesheet" href="fontawesome/css/all.min.css" />
  <link rel="stylesheet" href="css/dripicons.css" />
  <link rel="stylesheet" href="css/slick.css" />
  <link rel="stylesheet" href="css/default.css" />
  <link rel="stylesheet" href="css/meanmenu.css" />
  <link rel="stylesheet" href="css/nice-select.css" />
  <link href="css/bootstrap-datepicker.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/responsive.css" />
</head>

<body>
  <!-- header -->
  <header class="header-area">
    <div id="header-sticky" class="menu-area">
      <div class="container">
        <div class="second-menu">
          <div class="row align-items-center">
            <div class="col-xl-2 col-lg-2">
              <div class="logo">
                <a href="index.php"><img src="img/logo/logo.png" alt="logo" /></a>
              </div>
            </div>
            
            <div class="col-xl-5 col-lg-7">
              <div class="main-menu text-right pr-15">
                <nav id="mobile-menu">
                  <ul>
                    <li class="has-sub">
                      <a href="index.php">Home</a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
            
            <div class="col-12">
              <div class="mobile-menu"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- offcanvas-area -->
      <div class="offcanvas-menu">
        <span class="menu-close"><i class="fas fa-times"></i></span>
        <form role="search" method="get" id="searchform" class="searchform"
          action="http://wordpress.zcube.in/xconsulta/">
          <input type="text" name="s" id="search" value="" placeholder="Search" />
          <button><i class="fa fa-search"></i></button>
        </form>

        <div id="cssmenu2" class="menu-one-page-menu-container">
          <ul id="menu-one-page-menu-1" class="menu">
            <li class="menu-item menu-item-type-custom menu-item-object-custom">
              <a href="#home"><span>+8 12 3456897</span></a>
            </li>
            <li class="menu-item menu-item-type-custom menu-item-object-custom">
              <a href="#howitwork"><span></span></a>
            </li>
          </ul>
        </div>
      </div>
      <div class="offcanvas-overly"></div>
      <!-- offcanvas-end -->
    </div>
  </header>
  <!-- header-end -->
  <main>
    <!-- breadcrumb-area -->
    <section class="breadcrumb-area d-flex align-items-center" style="background-image: url(img/bg/test-bg.png)">
      <div class="container">
        <div class="row">
          <div class="col-xl-6 offset-xl-3 col-lg-8 offset-lg-2">
            <div class="breadcrumb-wrap text-center">
              <div class="breadcrumb-title mt-115 mb-30">
                <h2>BLOG</h2>
              </div>
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item">
                    <a href="index.html">Home</a>
                  </li>
                  <li class="breadcrumb-item active" aria-current="page">
                    News
                  </li>
                </ol>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- breadcrumb-area-end -->
    <!-- inner-blog -->
    <section class="inner-blog b-details-p pt-120 pb-70">
      <div class="container">
        <div class="row">
          <div class="col-lg-8">
            <div class="blog-details-wrap">
              <div class="bsingle__post-thumb mb-30">
                <img src="images/1.jpg" alt="" />
              </div>
              <div class="meta__info">
                <ul>
                  <li><i class="far fa-calendar-alt"></i> 4th June 2020</li>
                  <li>
                    <a href="#"><i class="far fa-user"></i>by Zcube</a>
                  </li>
                  <li><i class="far fa-comments"></i>35 Comments</li>
                </ul>
              </div>
              <div class="details__content pb-50">
                <h2>
                  With our vastly improved notifications system, users have
                  more control on your mind.
                </h2>
                <p>
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                  sed do eiusmod tempor incididunt ut labore et dolore magna
                  aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                  ullamco laboris nisi ut aliquip ex ea commodo amet set for
                  your cool happiness for lyour loyal city.
                </p>
                <p>
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                  sed do eiusmod tempor incididunt ut labore et dolore magna
                  aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                  ullamco laboris nisi ut aliquip ex ea commodo consequat.
                  Duis aute irure dolor in reprehenderit in voluptate velit
                  esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
                  occaecat cupidatat non proident, sunt in culpa qui officia
                  deser unt mollit anim id est laborum. Sed ut perspiciatis
                  unde omnis iste natus error sit voluptatem accusant ium
                  doloremque laudantium, totam rem aperiam, eaque ipsa quae ab
                  illo inventore veritatis et quasi architecto beatae vitae
                  dicta sunt explicabo. Nemo enim ipsam voluptatem quia
                  voluptas sit asperna tur aut odit aut fugit, sed quia
                  consequuntur magni dolores eos qui ratione voluptatem sequi
                  nesciunt. Neque porro quisquam est.
                </p>
                <blockquote>
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                  sed do eiusmod tempor incididunt with ut labore et dolore
                  magna aliqua. Ut enim ad minim veniam, quis nostrud
                  exercitation a deef ullamco laboris nisi ut aliquip ex ea
                  commodo consequat see you again tommorow.
                  <footer>- Rosalina Pong</footer>
                </blockquote>



                <div class="comment__wrap pb-45 mb-45" id="comments-section">
                  <div class="comment__wrap-title">
                    <h5>Comments</h5>
                  </div>
                </div>

                <script>
                  function postComment() {
                    const commentsSection = document.getElementById("comments-section");
                    const form = document.querySelector(".comment_form");

                    // Mueve estas líneas después de declarar formData
                    // originalName = formData.get('name');
                    // originalEmail = formData.get('email');
                    // originalComment = formData.get('comment');

                    form.addEventListener("submit", function (e) {
                      e.preventDefault();
                      const formData = new FormData(form); // Declarar formData aquí

                      // Mueve estas líneas aquí para asegurarte de que formData esté declarado
                      const originalName = formData.get("name");
                      const originalEmail = formData.get("email");
                      const originalComment = formData.get("comment");

                      fetch("method.php", {
                        method: "POST",
                        body: formData,
                      })
                        .then((response) => response.text())
                        .then((data) => {
                          fetchComments(); // Obtener comentarios actualizados sin recargar la página
                          form.reset(); // Restablecer los campos del formulario después de enviar el comentario
                        })
                        .catch((error) => console.error("Error:", error));
                    });
                  }

                  function fetchComments() {
                    const commentsSection =
                      document.getElementById("comments-section");

                    fetch("method.php")
                      .then((response) => response.json())
                      .then((data) => {
                        commentsSection.innerHTML = ""; // Borrar los comentarios anteriores
                        const avatarURL =
                          "https://w0.peakpx.com/wallpaper/465/1021/HD-wallpaper-satoru-gojo-art-8k-anime-and-background-den-anime-anime-8k.jpg";
                        data.forEach((comment) => {
                          const singleComment = document.createElement("div");
                          singleComment.className = "single__comment mb-35";

                          singleComment.innerHTML = `
                            <div class="comments-avatar">
                              <img src="${avatarURL}" alt="">
                            </div>
                            <div class="comment-text">
                              <div class="avatar-name mb-15">
                                <h6>${comment.name}</h6>
                                <span>${comment.email}</span>
                
                                <button class="edit-button" onclick="editComment(${comment.id}, '${comment.name}', '${comment.email}', '${comment.comment}')">
                                  <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-button" onclick="deleteComment(${comment.id})">
                                  <i class="fas fa-trash"></i>
                                </button>
                
                              </div>
                              <p>${comment.comment}</p>
                              <span>${comment.date}</span>
                            </div>
                
                          `;

                          commentsSection.appendChild(singleComment);
                        });
                      })
                      .catch((error) => console.error("Error:", error));
                  }

                  function editComment(id, name, email, comment) {
                    const form = document.querySelector(".comment_form");
                    const nameField = form.querySelector('input[name="name"]');
                    const emailField = form.querySelector('input[name="email"]');
                    const commentField = form.querySelector('textarea[name="comment"]');
                    const idField = form.querySelector('input[name="comment_id"]');

                    if (nameField && emailField && commentField && idField) {
                      nameField.value = name;
                      emailField.value = email;
                      commentField.value = comment;
                      idField.value = id;
                    } else {
                      console.log(
                        "Alguno de los campos no se seleccionó correctamente."
                      );
                    }
                  }

                  function updateComment() {
                    const form = document.querySelector(".comment_form");
                    const formData = new FormData(form);
                  
                    const nameField = "";
                    const emailField = "";
                    const commentField = "";
                    const idField = "";
                  
                    const newName = formData.get('name');
                    const newEmail = formData.get('email');
                    const newComment = formData.get('comment');
                  
                    let changedFields = 0;
                  
                    if (newName !== nameField) {
                      changedFields++;
                    }
                    if (newEmail !== emailField) {
                      changedFields++;
                    }
                    if (newComment !== commentField) {
                      changedFields++;
                    }
                    console.log(changedFields);
                  
                    if (changedFields < 2) {
                      fetch("method.php", {
                        method: "PATCH",
                        body: formData,
                      })
                        .then((response) => response.text())
                        .then((data) => {
                          fetchComments();
                          form.reset();
                        })
                        .catch((error) => console.error("Error:", error));
                    } else {
                      fetch("method.php", {
                        method: "PUT",
                        body: formData,
                      })
                        .then((response) => response.text())
                        .then((data) => {
                          fetchComments();
                          form.reset();
                        })
                        .catch((error) => console.error("Error:", error));
                    }
                  }

                  

                  function deleteComment(id) {
                    fetch(`method.php?id=${id}`, {
                      method: "DELETE",
                    })
                      .then((response) => response.text())
                      .then((data) => {
                        fetchComments(); // Obtener comentarios actualizados sin recargar la página
                      })
                      .catch((error) => console.error("Error:", error));
                  }

                  // Llamada a la función fetchComments al cargar el DOM
                  document.addEventListener("DOMContentLoaded", fetchComments);
                </script>

                <div class="post-comments-form mb-50">
                  <div class="comment__wrap-title">
                    <h5>Post Comment</h5>
                  </div>
                  <div class="comment-box">
                    <form action="#" class="comment_form" id="comment_form">
                      <div class="comment-field text-area mb-20">
                        <i class="fas fa-pencil-alt"></i>
                        <textarea name="comment" id="message" cols="30" rows="10"
                          placeholder="Type your comments...."></textarea>
                      </div>
                      <div class="comment-field mb-20">
                        <i class="far fa-user"></i>
                        <input type="text" name="name" placeholder="Type your name...." />
                      </div>
                      <div class="comment-field mb-20">
                        <i class="fas fa-envelope"></i>
                        <input type="email" name="email" placeholder="Type your email...." />
                      </div>
                      <input type="hidden" name="comment_id" id="comment_id" value="" />
                      <button type="submit" class="btn" onclick="postComment()">
                        Post Comments
                      </button>
                      <button type="button" onclick="updateComment()">
                        <i class="fas fa-sync-alt"></i> Update Comment
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>


            <!-- footer-end -->

            <!-- JS here -->
            <!-- JS here -->
            <script src="js/vendor/modernizr-3.5.0.min.js"></script>
            <script src="js/vendor/jquery-1.12.4.min.js"></script>
            <script src="js/popper.min.js"></script>
            <script src="js/bootstrap.min.js"></script>
            <script src="js/one-page-nav-min.js"></script>
            <script src="js/jquery.meanmenu.min.js"></script>
            <script src="js/slick.min.js"></script>
            <script src="js/ajax-form.js"></script>
            <script src="js/paroller.js"></script>
            <script src="js/wow.min.js"></script>
            <script src="js/js_isotope.pkgd.min.js"></script>
            <script src="js/imagesloaded.min.js"></script>
            <script src="js/parallax.min.js"></script>
            <script src="js/jquery.waypoints.min.js"></script>
            <script src="js/jquery.counterup.min.js"></script>
            <script src="js/jquery.scrollUp.min.js"></script>
            <script src="js/parallax-scroll.js"></script>
            <script src="js/jquery.magnific-popup.min.js"></script>
            <script src="js/element-in-view.js"></script>
            <script src="js/jquery.nice-select.js"></script>
            <script src="js/bootstrap-datepicker.min.js"></script>
            <script src="js/main.js"></script>
</body>

</html>